<div id='menu'>
	<div class='cmd link ' id='cancel'>
		<%=APP.Icon('cancel')%> cancel
	</div>
	<div class='cmd link' id='save'>
		<%=APP.Icon('save')%> save
	</div>
	<% if (U.Can('expenses','delete') || _.created_by==U.id) { %>
		<div class='cmd link danger' id='delete'>
			<%=APP.Icon('user-times')%> delete
		</div>
		<% } %>
			<span id='title'>Expense Report</span>
</div>

<table class='table table-left table-full'>
	<tr>
		<th>Expense ID</th>
		<td>
			<%=expense_id%>
				<input class='field dirty' type='hidden' id='expense_id' value='<%=expense_id%>'>
		</td>
		<th>Kind</th>
		<td>
			<select id='kind'>
				<option <%=kind=='fieldservice' ? "selected": ""%> value="fieldservice">Field Service</option>
				<option <%=kind=='other' ? "selected": ""%> value="other">Other</option>
			</select>
		</td>
	</tr>
	<tr>
		<th>Order</th>
		<td>
			<!-- <%=APP.HTML.Select("order", APP.models.orders,"order","order",order,"field", true)%> -->
			<%=APP.HTML.Autocomplete("order", APP.models.orders,"order","order",order,"field", true)%>
		</td>
		<th>Mileage Rate</th>
		<td>
			<input type='number' id='mileage_rate' class='field' value='<%=mileage_rate%>'>
		</td>
	</tr>
	<tr>
		<th>Start Date</th>
		<td>
			<input type='date' id='start_date' class='field' value='<%=start_date%>'>
		</td>
		<th>Duration (days)</th>
		<td>
			<input type='number' id='duration' class='field' value='<%=duration%>'>
		</td>
	</tr>
	<tr>
		<th>Purpose</th>
		<td colspan=3>
			<input type='text' id='purpose' class='field' value='<%=purpose%>' placeholder="Purpose of trip">
		</td>
	</tr>
</table>

<table id='expenses' class='table table-full table-top'>
	<thead>
		<tr>
			<th>
				Category
			</th>
			<% for (var d = 1; d<= duration; d++) { %>
				<th class='header_dates'>
					<%=APP.Format.date(new Date(start_date).getTime()+1000*3600*24*d)%>
				</th>
				<% } %>
					<th align='right' class='total'>Total</th>
					<th align='right' class='paid_by_employer'>Employer</th>
					<th align='right' class='paid_by_employee'>Employee</th>
		</tr>
	</thead>
	<tbody>
	</tbody>
	<tfoot>
		<tr>
			<td>
				<button id='add' class='btn btn-small'>
					<%=APP.Icon('new')%> Add Line</button>
			</td>
			<% for (var d = 1; d<= duration; d++) { %>
				<th id='total_<%=d%>'>
					<%=APP.Format.money(0)%>
				</th>
				<% } %>
					<th align="right" id='total_total'>
						<%=APP.Format.money(total)%>
					</th>
					<th align="right" id='total_employer'>
						<%=APP.Format.money(paid_by_employer)%>
					</th>
					<th align="right" id='total_employee'>
						<%=APP.Format.money(paid_by_employee)%>
					</th>
		</tr>
	</tfoot>
</table>
